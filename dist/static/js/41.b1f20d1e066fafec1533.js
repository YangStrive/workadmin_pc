webpackJsonp([41],{1142:function(t,e,a){(t.exports=a(54)(!1)).push([t.i,".kqtasklist .kqtask_title .addtask .el-button span{font-size:13px}.kqtasklist .kqtask_table .el-table__header-wrapper thead th{border-right:1px solid #d3dce6}.kqtasklist .kqtask_table .el-table__body-wrapper tr td{cursor:auto!important;height:88px}.kqtasklist .kqtask_table .el-table__body-wrapper tr:hover>td{background-color:#fff!important}.kqtasklist .kqtask_table .el-table__body-wrapper tr.disabled td .cell{color:#99a9bf}.kqtasklist .kqtask_table .el-table__body-wrapper tr td .cell .text1{line-height:1.5}.kqtasklist .kqtask_table .el-table__body-wrapper tr.disabled td .cell .text2{color:#c0ccda}.kqtasklist .kqtask_table .el-button span{font-size:12px}",""])},1143:function(t,e,a){(t.exports=a(54)(!1)).push([t.i,".kqtasklist[data-v-520dc78a]{padding:0 20px}.kqtasklist .kqtask_top[data-v-520dc78a]{height:50px;border-bottom:1px solid #e0e6ed}.kqtasklist .kqtask_main[data-v-520dc78a]{margin:8px 0 16px}.kqtasklist .kqtask_main .kqtask_title[data-v-520dc78a]{height:54px}.kqtasklist .kqtask_main .kqtask_title h2[data-v-520dc78a]{float:left;line-height:54px;font-size:16px;font-weight:500;font-style:normal;color:#475568}.kqtasklist .kqtask_main .kqtask_title .addtask[data-v-520dc78a]{float:right;height:54px}.kqtasklist .kqtask_main .kqtask_title .addtask .add_item[data-v-520dc78a]{height:24px;line-height:24px;margin:15px 0;font-size:13px;color:#69e;background:url("+a(168)+") 0 no-repeat;text-indent:18px;cursor:pointer}.kqtasklist .kqtask_main .kqtask_title .addtask .add_item[data-v-520dc78a]:active{color:#517ed6}.kqtasklist .kqtask_main .text2[data-v-520dc78a]{color:#99a9bf;line-height:15px}",""])},1285:function(t,e,a){var s=a(1142);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(55)("11ecf4b6",s,!0)},1286:function(t,e,a){var s=a(1143);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(55)("4881623a",s,!0)},144:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI5cHgiIHZpZXdCb3g9IjAgMCA1IDkiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NS4yICg0MzUxNCkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPuWQkeW3pueureWktCBjb3B5IDY8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPjwvZGVmcz4NCiAgICA8ZyBpZD0iMS4xX+S6uuWRmOeuoeeQhiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI4MS4wMDAwMDAsIC0xNjYuMDAwMDAwKSIgZmlsbD0iI0MwQ0NEQSI+DQogICAgICAgICAgICA8cGF0aCBkPSJNMjgxLjA1NDc4OSwxNzAuNzA5MDA1IEMyODAuOTU2NzY4LDE3MC40OTQ5MTIgMjgwLjk4ODg2MiwxNzAuMjMyOTY5IDI4MS4xNjI0NDEsMTcwLjA2MDgwNyBMMjg1LjA5NzY5NCwxNjYuMTUzMzc3IEMyODUuMzEyMjg5LDE2NS45NDA0MjUgMjg1LjY1MDU3MSwxNjUuOTUwNTQ3IDI4NS44NTM3ODUsMTY2LjE3NTQ4MyBDMjg2LjA1NjYyMSwxNjYuNDAwNzU1IDI4Ni4wNDczMjMsMTY2Ljc1NTg4NyAyODUuODMyNzI4LDE2Ni45NjkyMjQgTDI4Mi4zMDE3ODgsMTcwLjQ3NTgzMiBMMjg1LjgxODc5NywxNzQuMDM0NDgxIEMyODYuMDMxMjY0LDE3NC4yNDk3MDIgMjg2LjAzNzY5MiwxNzQuNjA0ODM1IDI4NS44MzI3MjgsMTc0LjgyODIyMSBDMjg1LjcyNzkxMywxNzQuOTQyNzcyIDI4NS41ODc4NDYsMTc1IDI4NS40NDc3MjMsMTc1IEMyODUuMzE0MDczLDE3NSAyODUuMTgwMzc3LDE3NC45NDc2MzYgMjg1LjA3NjY0OSwxNzQuODQyODQ2IEwyODEuMTc3MDcsMTcwLjg5NzIxIEMyODEuMTY5NTY3LDE3MC44ODkzOTMgMjgxLjE2NjczMSwxNzAuODc4NTI2IDI4MS4xNTkyMjcsMTcwLjg3MDMyNSBDMjgxLjE1MzUwOCwxNzAuODY0NjU3IDI4MS4xNDc0ODEsMTcwLjg2MDU2MyAyODEuMTQxNzczLDE3MC44NTQ1NTkgQzI4MS4xMTE0NjMsMTcwLjgyMTI2MiAyODEuMDk1NDE2LDE3MC43ODA0ODUgMjgxLjA3NDc0OCwxNzAuNzQyMjg5IEMyODEuMDY5MDUyLDE3MC43MzA2OSAyODEuMDU5Nzc2LDE3MC43MjA5ODggMjgxLjA1NDc4OSwxNzAuNzA5MDA1IFoiIGlkPSLlkJHlt6bnrq3lpLQtY29weS02IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyODMuNTAwMDAwLCAxNzAuNTAwMDAwKSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC0yODMuNTAwMDAwLCAtMTcwLjUwMDAwMCkgIj48L3BhdGg+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},1517:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"kqtasklist"},[a("div",{staticClass:"kqtask_top"},[a("breadcrumb",[a("router-link",{attrs:{to:"kqaddmin",replace:""}},[t._v("考勤管理")]),t._v(" "),a("router-link",{attrs:{to:""}},[t._v("考勤规则管理")])],1)],1),t._v(" "),a("div",{staticClass:"kqtask_main"},[a("div",{staticClass:"kqtask_title"},[a("h2",[t._v("考勤规则列表")]),t._v(" "),1==t.show_edit_btn?a("div",{staticClass:"addtask"},[a("div",{staticClass:"add_item",on:{click:function(e){return t.addTaskFn(0)}}},[t._v("添加考勤规则")])]):t._e()]),t._v(" "),a("div",{staticClass:"kqtask_table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.task_list,height:t.table_height,"empty-text":"暂无考勤规则","row-class-name":t.addRowClass}},[a("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,label:"考勤规则名称","min-width":"172"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"时间范围","show-overflow-tooltip":!0,"min-width":"162"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.work_type?[a("div",{staticStyle:{"white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},[t._v("\n                "+t._s(t.computedweek(e.row.work_week))+"\n              ")]),t._v(" "),t._l(e.row.work_time_range,function(e,s){return a("div",{staticClass:"text2"},[t._v("\n                "+t._s(t.computedTimeRange(e,s))+"\n              ")])})]:t._e(),t._v(" "),1==e.row.work_type?[a("div",{staticStyle:{"white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},[t._v("\n                "+t._s(t.computedweek(e.row.work_week))+"\n              ")]),t._v(" "),a("div",{staticClass:"text2"},[t._v("\n                工作"+t._s(e.row.work_time_length)+"个小时\n              ")])]:t._e(),t._v(" "),2==e.row.work_type?[t._l(e.row.task_schedules,function(e,s){return s<3?a("div",{staticClass:"text1"},[t._v("\n                "+t._s(t.computedSchedule(e,s))+"\n              ")]):t._e()}),t._v(" "),e.row.task_schedules.length>3?a("div",{staticStyle:{"font-size":"25px",color:"#99a9bf",position:"absolute",bottom:"5px"}},[t._v("\n                ...\n              ")]):t._e()]:t._e(),t._v(" "),3==e.row.work_type?[t._l(e.row.task_schedules,function(e,s){return s<3?a("div",{staticClass:"text1"},[t._v("\n                "+t._s(t.computedSchedule(e,s))+"\n              ")]):t._e()}),t._v(" "),e.row.task_schedules.length>3?a("div",{staticStyle:{"font-size":"25px",color:"#99a9bf",position:"absolute",bottom:"5px"}},[t._v("\n                ...\n              ")]):t._e()]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"team",label:"参与小组及成员","min-width":"123"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.computedMember(e))+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"排班方式","min-width":"75"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(0==e.row.work_type?"固定时间":1==e.row.work_type?"弹性时间":2==e.row.work_type?"人员排班":"员工自主排班")+"\n          ")]}}])}),t._v(" "),t._l(t.invisible_man,function(e,s){return a("el-table-column",{key:e,attrs:{prop:"type",label:"启用/禁用","min-width":"89"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{disabled:1!=t.show_edit_btn,"on-value":"1","off-value":"0","on-color":"#6097e4","off-color":"#c0ccda","on-text":"","off-text":""},on:{change:function(a){return t.changeTaskstatus(e.row.status,e.$index,t.task_list)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}],null,!0)})}),t._v(" "),t._l(t.invisible_man,function(e,s){return a("el-table-column",{key:s,attrs:{prop:"status",label:"操作","min-width":"163"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==t.show_edit_btn?[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.addTaskFn(e.row.id)}}},[t._v("\n                修改规则\n              ")]),t._v(" "),2==e.row.work_type||3==e.row.work_type?a("el-button",{staticStyle:{color:"#e0e6ed",cursor:"auto"},attrs:{type:"text"}},[t._v("\n                |\n              ")]):t._e()]:t._e(),t._v(" "),[2==e.row.work_type?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.editPb(e.row)}}},[t._v("\n                排班\n              ")]):t._e(),t._v(" "),3==e.row.work_type?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.editygPb(e.row)}}},[t._v("\n                排班\n              ")]):t._e(),t._v(" "),1==t.show_edit_btn?a("el-button",{staticStyle:{color:"#e0e6ed",cursor:"auto"},attrs:{type:"text"}},[t._v("\n                |\n              ")]):t._e()],t._v(" "),1==t.show_edit_btn?[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.delTaskFn(e.row.id)}}},[t._v("\n                删除\n              ")])]:t._e()]}}],null,!0)})})],2)],1)])])},staticRenderFns:[]}},168:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE0cHgiIGhlaWdodD0iMTRweCIgdmlld0JveD0iMCAwIDE0IDE0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDUuMSAoNDM1MDQpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT7mt7vliqBfaG92ZXIxPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IjEuMV/kurrlkZjnrqHnkIYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00OTYuMDAwMDAwLCAtMzU0LjAwMDAwMCkiIGZpbGw9IiM2Njk5RUUiPg0KICAgICAgICAgICAgPHBvbHlnb24gaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5IiBwb2ludHM9IjUwNCAzNjAgNTA0IDM1NSA1MDIgMzU1IDUwMiAzNjAgNDk3IDM2MCA0OTcgMzYyIDUwMiAzNjIgNTAyIDM2NyA1MDQgMzY3IDUwNCAzNjIgNTA5IDM2MiA1MDkgMzYwIj48L3BvbHlnb24+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},175:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(6);a.n(s),a(5);e.default={name:"breadcrumb",data:function(){return{}},methods:{init:function(){}},mounted:function(){this.init()}}},176:function(t,e,a){(t.exports=a(54)(!1)).push([t.i,'.breadcrumb[data-v-615b8756]{float:left;padding-top:18px}.breadcrumb .wraper a[data-v-615b8756]{font-size:13px;color:#69e;font-weight:700}.breadcrumb .wraper a[data-v-615b8756]:last-child{color:#8492a6;cursor:default}.breadcrumb .wraper a[data-v-615b8756]:after{content:"";margin-left:8px;display:inline-block;width:10px;height:10px;background:url('+a(144)+") no-repeat}.breadcrumb .wraper a[data-v-615b8756]:last-child:after{display:none}",""])},177:function(t,e,a){var s=a(176);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(55)("45cb026d",s,!0)},178:function(t,e,a){var s=a(2)(a(175),a(179),function(t){a(177)},"data-v-615b8756",null);t.exports=s.exports},179:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"breadcrumb"},[e("div",{staticClass:"wraper"},[this._t("default")],2)])},staticRenderFns:[]}},90:function(t,e,a){var s=a(2)(a(960),a(1517),function(t){a(1285),a(1286)},"data-v-520dc78a",null);t.exports=s.exports},960:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(6),i=a.n(s),n=a(5),o=a(178),r=a.n(o);e.default={name:"kqtasklist",components:{breadcrumb:r.a},data:function(){return{team_id:0,project_id:0,invisible_man:[1],task_list:[],table_height:300,show_edit_btn:0}},methods:{init:function(){var t=this;this.table_height=i()(window).height()-193,i()(window).resize(function(){t.table_height=i()(window).height()-193}),this.team_id=n.a("projectStorageInfo").team_id,this.project_id=n.a("projectStorageInfo").project_id,this.getpermission(),this.getTaskList()},addTaskFn:function(t){0==t?n.c("kqpb_task_id",0,86400):n.c("kqpb_task_id",t,86400),this.$router.replace("kqsettask")},delTaskFn:function(t){var e=this;this.$confirm("确定删除该考勤规则？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){console.log(t),n.b({url:"/attendance/attendance_task/delete",type:"POST",data:{team_id:e.team_id,project_id:e.project_id,task_id:t},success:function(t){t&&0==t.errno&&(e.$message({showClose:!0,message:"删除成功",type:"success"}),e.getTaskList())},error:function(t,e){},noNetwork:function(){e.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}})}).catch(function(){})},getTaskList:function(){var t=this;n.b({url:"/attendance/attendance_task_list",type:"GET",data:{team_id:this.team_id,project_id:this.project_id,page_size:1e3,max_id:0},success:function(e){console.log("考勤任务列表"),e&&0==e.errno&&(t.task_list=e.data.list,t.show_edit_btn=e.data.page_data.show_edit_btn)},error:function(t,e){},noNetwork:function(){t.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}})},editPb:function(t){1==t.status?(n.c("kqpb_task_id",t.id,86400),this.$router.replace("kqeditpb")):this.$message({showClose:!0,message:"该考勤规则已禁用",type:"warning"})},editygPb:function(t){1==t.status?(n.c("kqpb_task_id",t.id,86400),this.$router.replace("kqeditygpb")):this.$message({showClose:!0,message:"该考勤规则已禁用",type:"warning"})},changeTaskstatus:function(t,e,a){var s=this;n.b({url:"/attendance/attendance_task_status/update",type:"POST",data:{team_id:this.team_id,project_id:this.project_id,task_id:a[e].id,status:1==t?1:0},success:function(i){i&&0==i.errno||("Project does not exist or offline"==i.errmsg?(a[e].status=1==t?0:1,s.$message({showClose:!0,message:"项目已结束",type:"warning"})):(a[e].status=1==t?0:1,s.$message({showClose:!0,message:i.errmsg,type:"warning"})))},error:function(t,e){},noNetwork:function(){a[e].status=1==t?0:1,s.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}})},computedMember:function(t){return t.row.participant_group.length&&t.row.participant_user.length?t.row.participant_group.length+"个小组，"+t.row.participant_user.length+"个成员":t.row.participant_group.length?t.row.participant_group.length+"个小组":t.row.participant_user.length?t.row.participant_user.length+"个成员":""},getpermission:function(){var t=this;this.invisible_man=[1],n.b({url:"/permission/application",type:"GET",data:{team_id:this.team_id,project_id:this.project_id,application_id:1},timeout:1e4,success:function(e){e&&0==e.errno&&e.data.forEach(function(e){"invisible_man"===e.id_name&&(t.invisible_man=[]),"naixue_saas_project_ids_admin"!==e.id_name&&"naixue_saas_project_ids_group"!==e.id_name||window.localStorage.setItem("naixue_project_kaoqin",!0)})},error:function(e,a){t.alertinfo("网络连接失败，请检查网络")},noNetwork:function(){t.alertinfo("网络连接失败，请检查网络")}})},computedweek:function(t){var e="";return t.forEach(function(t){switch(t){case"1":e+="周一、";break;case"2":e+="周二、";break;case"3":e+="周三、";break;case"4":e+="周四、";break;case"5":e+="周五、";break;case"6":e+="周六、";break;case"7":e+="周日、"}}),e.substr(0,e.length-1)},computedTimeRange:function(t,e){switch(e){case 0:return"时段一："+t.start.time+"-"+(1==t.cross?"次日":"")+t.end.time;case 1:return"时段二："+t.start.time+"-"+(1==t.cross?"次日":"")+t.end.time;case 2:return"时段三："+t.start.time+"-"+(1==t.cross?"次日":"")+t.end.time}},computedSchedule:function(t,e){switch(e){case 0:return"班次A："+t.start_time+"-"+(1==t.cross?"次日":"")+t.end_time;case 1:return"班次B："+t.start_time+"-"+(1==t.cross?"次日":"")+t.end_time;case 2:return"班次C："+t.start_time+"-"+(1==t.cross?"次日":"")+t.end_time}},addRowClass:function(t,e){return 0==t.status?"disabled":""}},mounted:function(){"hideNav"==this.$route.query.pageType&&(document.querySelector(".side_bar").style.display="none",document.querySelector(".routerView").style.marginLeft=0,document.querySelector(".applications .title").style.display="none",document.querySelector(".kqtask_top").style.display="none"),this.init()},watch:{$route:function(t,e){this.init()}}}}});