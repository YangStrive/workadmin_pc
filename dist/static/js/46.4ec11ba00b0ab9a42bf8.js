webpackJsonp([46],{1100:function(e,t,i){(e.exports=i(54)(!1)).push([e.i,".kqeditygpb{padding:0 20px}.kqeditygpb .kqeditygpb_top{height:50px;border-bottom:1px solid #e0e6ed}.kqeditygpb .search_select .from-item-list{float:left;margin-right:13px}.kqeditygpb .search_select .el-form-item__label{padding:11px 0;float:left;color:#5e6d82;font-size:12px}.kqeditygpb .page_title{font-size:16px;margin-bottom:24px;color:#475669}.kqeditygpb .kqeditygpb_do{padding:24px 0 16px}.kqeditygpb .btn-item{color:#69e;cursor:pointer;float:right}.kqeditygpb .add_icon{display:block;width:13px;height:13px;margin-right:6px;float:left;margin-top:10px;background-image:url("+i(168)+')}.kqeditygpb .el-tag--primary0{width:52px;height:24px;border-radius:2px;background-color:rgba(247,165,0,.08);border:1px solid #fde0a5;font-size:12px;color:#f7a500}.kqeditygpb .el-tag--primary1{width:52px;height:24px;border-radius:2px;background-color:rgba(99,180,93,.07);border:1px solid rgba(99,180,93,.35);color:#70cb6a;font-size:12px}.kqeditygpb .el-table td,.kqeditygpb .el-table th{height:36px}.kqeditygpb .el-table--border th,.kqeditygpb .el-table td,.kqeditygpb .el-table th.is-leaf{border-right:1px solid #e0e6ed}.kqeditygpb .el-pagination button:hover{color:#69e}.kqeditygpb .ygpb_list .el-pagination button.disabled{background-color:#eff2f7;color:#d3dce6}.kqeditygpb .ygpb_operation .el-form-item{margin-bottom:0}.kqeditygpb .el-pagination{text-align:right;padding:10px 0 0}.el-pagination span,.kqeditygpb .page .el-pagination button{font-size:10px;line-height:28px;min-width:22px}.el-form:after{content:"";display:block;clear:both}.kqeditygpb .ygpb_mask .el-dialog__body{margin-top:30px;padding-bottom:14px}.kqeditygpb .ygpb_mask .el-dialog--tiny{width:420px}.kqeditygpb .ygpb_mask .el-form-item__label{color:#475669}.kqeditygpb .ygpb_mask .el-form-item{margin-bottom:16px}.kqeditygpb .ygpb_mask .el-form-item__label{padding:11px 30px 11px 0}.kqeditygpb .el-dialog__footer{border-top:1px solid #e0e6ed;padding:15px 20px}.kqeditygpb .release_prompt{font-size:13px;color:#99a9bf;margin:0 0 16px 40px}.kqeditygpb .operation_orw:after{display:block;content:"";clear:both}.kqeditygpb .operation_orw div{position:relative;padding:0 8px;float:left;font-size:12px;color:#69e;cursor:pointer}.kqeditygpb .operation_orw div:active{color:#517ed6}.kqeditygpb .operation_orw .operation_item:after{position:absolute;right:0;top:7px;display:block;content:"";width:1px;height:10px;background-color:#e0e6ed}.kqeditygpb .el-form-item__error{position:static;margin-bottom:-7px}.kqeditygpb .releaseygpb .el-form-item__error{margin-left:40px}.kqeditygpb .el-form-item.is-required .el-form-item__label:before{content:""}.kqeditygpb .el-table--border td{border-right:0}.kqeditygpb .createygpb .el-scrollbar{width:254px}.kqeditygpb .el-table__row:hover{background-color:#f7f7f9;cursor:pointer}',""])},1243:function(e,t,i){var a=i(1100);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(55)("72ad110c",a,!0)},144:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI5cHgiIHZpZXdCb3g9IjAgMCA1IDkiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NS4yICg0MzUxNCkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPuWQkeW3pueureWktCBjb3B5IDY8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPjwvZGVmcz4NCiAgICA8ZyBpZD0iMS4xX+S6uuWRmOeuoeeQhiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI4MS4wMDAwMDAsIC0xNjYuMDAwMDAwKSIgZmlsbD0iI0MwQ0NEQSI+DQogICAgICAgICAgICA8cGF0aCBkPSJNMjgxLjA1NDc4OSwxNzAuNzA5MDA1IEMyODAuOTU2NzY4LDE3MC40OTQ5MTIgMjgwLjk4ODg2MiwxNzAuMjMyOTY5IDI4MS4xNjI0NDEsMTcwLjA2MDgwNyBMMjg1LjA5NzY5NCwxNjYuMTUzMzc3IEMyODUuMzEyMjg5LDE2NS45NDA0MjUgMjg1LjY1MDU3MSwxNjUuOTUwNTQ3IDI4NS44NTM3ODUsMTY2LjE3NTQ4MyBDMjg2LjA1NjYyMSwxNjYuNDAwNzU1IDI4Ni4wNDczMjMsMTY2Ljc1NTg4NyAyODUuODMyNzI4LDE2Ni45NjkyMjQgTDI4Mi4zMDE3ODgsMTcwLjQ3NTgzMiBMMjg1LjgxODc5NywxNzQuMDM0NDgxIEMyODYuMDMxMjY0LDE3NC4yNDk3MDIgMjg2LjAzNzY5MiwxNzQuNjA0ODM1IDI4NS44MzI3MjgsMTc0LjgyODIyMSBDMjg1LjcyNzkxMywxNzQuOTQyNzcyIDI4NS41ODc4NDYsMTc1IDI4NS40NDc3MjMsMTc1IEMyODUuMzE0MDczLDE3NSAyODUuMTgwMzc3LDE3NC45NDc2MzYgMjg1LjA3NjY0OSwxNzQuODQyODQ2IEwyODEuMTc3MDcsMTcwLjg5NzIxIEMyODEuMTY5NTY3LDE3MC44ODkzOTMgMjgxLjE2NjczMSwxNzAuODc4NTI2IDI4MS4xNTkyMjcsMTcwLjg3MDMyNSBDMjgxLjE1MzUwOCwxNzAuODY0NjU3IDI4MS4xNDc0ODEsMTcwLjg2MDU2MyAyODEuMTQxNzczLDE3MC44NTQ1NTkgQzI4MS4xMTE0NjMsMTcwLjgyMTI2MiAyODEuMDk1NDE2LDE3MC43ODA0ODUgMjgxLjA3NDc0OCwxNzAuNzQyMjg5IEMyODEuMDY5MDUyLDE3MC43MzA2OSAyODEuMDU5Nzc2LDE3MC43MjA5ODggMjgxLjA1NDc4OSwxNzAuNzA5MDA1IFoiIGlkPSLlkJHlt6bnrq3lpLQtY29weS02IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyODMuNTAwMDAwLCAxNzAuNTAwMDAwKSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC0yODMuNTAwMDAwLCAtMTcwLjUwMDAwMCkgIj48L3BhdGg+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},1492:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"kqeditygpb"},[i("div",{staticClass:"kqeditygpb_top"},[i("breadcrumb",[i("router-link",{attrs:{to:"kqaddmin",replace:""}},[e._v("考勤管理")]),e._v(" "),i("router-link",{attrs:{to:"kqtasklist"}},[e._v("考勤规则管理")]),e._v(" "),i("router-link",{attrs:{to:""}},[e._v("员工自主排班")])],1)],1),e._v(" "),i("div",{staticClass:"kqeditygpb_main"},[i("div",{staticClass:"kqeditygpb_do"},[i("h2",{staticClass:"page_title"},[e._v("排班任务")]),e._v(" "),i("div",{staticClass:"ygpb_operation"},[i("div",{staticClass:"search_select"},[i("el-form",{attrs:{"label-width":"40px"}},[i("div",{staticClass:"from-item-list"},[i("el-form-item",{attrs:{label:"日期："}},[i("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:e.pickerChange},model:{value:e.pickerchoose_date,callback:function(t){e.pickerchoose_date=t},expression:"pickerchoose_date"}})],1)],1),e._v(" "),e._e(),e._v(" "),e._e(),e._v(" "),i("div",{staticClass:"btn-item addMember",on:{click:e.createPbFn}},[i("i",{staticClass:"add_icon"}),e._v(" "),i("el-button",{attrs:{type:"text"}},[e._v("新建排班任务")])],1)],1)],1)])]),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.ygpbListLoading,expression:"ygpbListLoading"}],staticClass:"ygpb_list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:!1,expression:"false",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.ygpbList,border:"",height:e.tableHeight,"empty-text":"暂无数据"},on:{"row-click":e.getpeoplelist}},[i("el-table-column",{attrs:{prop:"project_name",label:"项目名称","show-overflow-tooltip":"","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"attendance_time",label:"考勤时间",width:"130"}}),e._v(" "),i("el-table-column",{attrs:{prop:"apply_num",label:"报名人数/需求人数",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("span",{staticStyle:{color:"#f26f4f"}},[e._v(e._s(t.row.apply_num))]),i("span",[e._v("/"+e._s(t.row.people_num))])])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"position",label:"工作地点","min-width":"180","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"addressinfo"},[e._v(e._s(t.row.position_name+"（"+t.row.position+"）"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"position_id",label:"有效时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.publish_date,function(t){return i("div",[e._v(e._s(t))])})}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"send_status",label:"发布状态",width:"90","filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tag",{attrs:{type:"primary"+t.row.send_status,"close-transition":""}},[e._v(e._s(0==t.row.send_status?"未发布":"已发布"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"status_no",label:"操作",width:"120","filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"operation_orw"},[0==t.row.send_status?[i("div",{staticClass:"operation_item",on:{click:function(i){return i.stopPropagation(),e.release(t.row)}}},[e._v("发布")]),e._v(" "),i("div",{on:{click:function(i){return i.stopPropagation(),e.editygpbfn(t.row)}}},[e._v("修改")])]:[i("div",{on:{click:function(i){return i.stopPropagation(),e.release(t.row)}}},[e._v("发布")])]],2)]}}])})],1),e._v(" "),e.ygpbList.length>0?i("el-pagination",{attrs:{"current-page":e.page_no,"page-size":e.page_size,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleSizeChange,"update:currentPage":function(t){e.page_no=t},"update:current-page":function(t){e.page_no=t}}}):e._e()],1)]),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.createloading,expression:"createloading"}],staticClass:"kqygpb-dialog createygpb ygpb_mask"},[i("el-dialog",{attrs:{title:"新建排班任务",visible:e.createshoworhide,size:"tiny"},on:{"update:visible":function(t){e.createshoworhide=t},close:function(t){return e.resetForm("createygpb","createshoworhide")}}},[i("el-form",{ref:"createygpb",attrs:{model:e.createygpb,"label-width":"125px",rules:e.rules}},[i("el-form-item",{attrs:{label:"需求人数",prop:"number"}},[i("el-input",{staticStyle:{width:"254px"},attrs:{"auto-complete":"off",placeholder:"请输入"},model:{value:e.createygpb.number,callback:function(t){e.$set(e.createygpb,"number",t)},expression:"createygpb.number"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"考勤时间",prop:"time"}},[i("el-select",{staticStyle:{width:"254px"},attrs:{placeholder:"请选择"},model:{value:e.createygpb.time,callback:function(t){e.$set(e.createygpb,"time",t)},expression:"createygpb.time"}},e._l(e.workTimeList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name+"班次 ("+e.start_time+"-"+(1==e.cross?"次日":"")+e.end_time+")",value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{staticClass:"approve_uid",attrs:{label:"工作地点",prop:"addr"}},[i("el-select",{staticStyle:{width:"254px"},attrs:{placeholder:"请选择"},model:{value:e.createygpb.addr,callback:function(t){e.$set(e.createygpb,"addr",t)},expression:"createygpb.addr"}},e._l(e.workAddrList,function(e){return i("el-option",{key:e.id,staticStyle:{width:"254px"},attrs:{label:e.name+"（"+e.address+"）",value:e.id}})}),1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"cancel",on:{click:function(t){return e.resetForm("createygpb","createshoworhide")}}},[e._v("取 消")]),e._v(" "),i("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(t){return e.addcreatefirm("createygpb")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),i("div",{staticClass:"kqygpb-dialog createygpb ygpb_mask"},[i("el-dialog",{attrs:{title:"修改排班",visible:e.editshoworhide,size:"tiny"},on:{"update:visible":function(t){e.editshoworhide=t},close:function(t){return e.resetForm("editygpb","editshoworhide")}}},[i("el-form",{ref:"editygpb",attrs:{model:e.editygpb,"label-width":"125px",rules:e.rules}},[i("el-form-item",{attrs:{label:"需求人数",prop:"number"}},[i("el-input",{staticStyle:{width:"254px"},attrs:{"auto-complete":"off",placeholder:"请输入"},model:{value:e.editygpb.number,callback:function(t){e.$set(e.editygpb,"number",e._n(t))},expression:"editygpb.number"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"考勤时间",prop:"time"}},[i("el-select",{staticStyle:{width:"254px"},attrs:{placeholder:"请选择"},model:{value:e.editygpb.time,callback:function(t){e.$set(e.editygpb,"time",t)},expression:"editygpb.time"}},e._l(e.workTimeList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name+"班次 ("+e.start_time+"-"+(1==e.cross?"次日":"")+e.end_time+")",value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{staticClass:"approve_uid",attrs:{label:"工作地点",prop:"addr"}},[i("el-select",{staticStyle:{width:"254px"},attrs:{placeholder:"请选择"},model:{value:e.editygpb.addr,callback:function(t){e.$set(e.editygpb,"addr",t)},expression:"editygpb.addr"}},e._l(e.workAddrList,function(e){return i("el-option",{key:e.id,staticStyle:{width:"254px"},attrs:{label:e.name+"（"+e.address+"）",value:e.id}})}),1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"cancel",on:{click:function(t){return e.resetForm("editygpb","editshoworhide")}}},[e._v("取 消")]),e._v(" "),i("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(t){return e.addeditfirm("editygpb")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),i("div",{staticClass:"kqygpb-dialog ygpb_mask releaseygpb"},[i("el-dialog",{attrs:{title:"发布排班",visible:e.releaseshoworhide,size:"tiny"},on:{"update:visible":function(t){e.releaseshoworhide=t},close:function(t){return e.resetForm("releaseygpb","releaseshoworhide")}}},[i("el-form",{ref:"releaseygpb",attrs:{model:e.releaseygpb,rules:e.rules}},[i("p",{staticClass:"release_prompt"},[e._v("员工可选择排班任务的日期范围：")]),e._v(" "),i("el-form-item",{attrs:{label:"",prop:"kqDateDay"}},[i("el-date-picker",{staticStyle:{width:"304px","margin-left":"40px"},attrs:{"range-separator":"至",clearable:!1,type:"daterange",placeholder:"请选择日期范围","picker-options":e.pbbegintime,editable:!1,"value-format":"yyyy-MM-dd"},model:{value:e.releaseygpb.kqDateDay,callback:function(t){e.$set(e.releaseygpb,"kqDateDay",t)},expression:"releaseygpb.kqDateDay"}})],1),e._v(" "),i("p",{staticClass:"release_prompt"},[e._v("注：排班发布后不可修改！")])],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"cancel",on:{click:function(t){return e.resetForm("releaseygpb","releaseshoworhide")}}},[e._v("取 消")]),e._v(" "),i("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(t){return e.addreleasefirm("releaseygpb")}}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]}},168:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE0cHgiIGhlaWdodD0iMTRweCIgdmlld0JveD0iMCAwIDE0IDE0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDUuMSAoNDM1MDQpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT7mt7vliqBfaG92ZXIxPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IjEuMV/kurrlkZjnrqHnkIYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00OTYuMDAwMDAwLCAtMzU0LjAwMDAwMCkiIGZpbGw9IiM2Njk5RUUiPg0KICAgICAgICAgICAgPHBvbHlnb24gaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5IiBwb2ludHM9IjUwNCAzNjAgNTA0IDM1NSA1MDIgMzU1IDUwMiAzNjAgNDk3IDM2MCA0OTcgMzYyIDUwMiAzNjIgNTAyIDM2NyA1MDQgMzY3IDUwNCAzNjIgNTA5IDM2MiA1MDkgMzYwIj48L3BvbHlnb24+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},175:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(6);i.n(a),i(5);t.default={name:"breadcrumb",data:function(){return{}},methods:{init:function(){}},mounted:function(){this.init()}}},176:function(e,t,i){(e.exports=i(54)(!1)).push([e.i,'.breadcrumb[data-v-615b8756]{float:left;padding-top:18px}.breadcrumb .wraper a[data-v-615b8756]{font-size:13px;color:#69e;font-weight:700}.breadcrumb .wraper a[data-v-615b8756]:last-child{color:#8492a6;cursor:default}.breadcrumb .wraper a[data-v-615b8756]:after{content:"";margin-left:8px;display:inline-block;width:10px;height:10px;background:url('+i(144)+") no-repeat}.breadcrumb .wraper a[data-v-615b8756]:last-child:after{display:none}",""])},177:function(e,t,i){var a=i(176);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(55)("45cb026d",a,!0)},178:function(e,t,i){var a=i(2)(i(175),i(179),function(e){i(177)},"data-v-615b8756",null);e.exports=a.exports},179:function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"breadcrumb"},[t("div",{staticClass:"wraper"},[this._t("default")],2)])},staticRenderFns:[]}},87:function(e,t,i){var a=i(2)(i(957),i(1492),function(e){i(1243)},null,null);e.exports=a.exports},957:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(5),o=i(178),s=i.n(o);t.default={name:"kqeditygpb",components:{breadcrumb:s.a},watch:{$route:function(e,t){"Project"!=e.name&&this.$router.replace("kqtasklist")}},data:function(){return{tableHeight:0,ygpbListLoading:!0,createshoworhide:!1,releaseshoworhide:!1,switchcheck:!0,editshoworhide:!1,createloading:!1,choose_date:"",pickerchoose_date:"",sfsfsfsfdsf:"",addr_select:"",page_size:20,total:0,page_no:1,ygpbList:[],createygpb:{addr:"",number:"",time:""},editygpb:{addr:"",number:"",time:""},releaseygpb:{kqDateDay:""},begintime:{disabledDate:function(e){return e.getTime()<Date.now()}},pbbegintime:{disabledDate:function(e){return e.getTime()<=Date.now()}},rules:{time:[{required:!0,message:"请选择考勤时间",trigger:"change"},{required:!0,message:"请选择考勤时间",trigger:"blur"}],number:[{required:!0,validator:function(e,t,i){if(!/^[0-9]*$/.test(t=0==+t?"error":+t))return i(new Error("请输入大于0的整数"));i()},trigger:"blur"}],addr:[{required:!0,message:"请选择工作地点",trigger:"change"},{required:!0,message:"请选择工作地点",trigger:"blur"}],kqDateDay:[{validator:function(e,t,i){return t?a.q(a.h(t[0]),a.h(t[1]))>365?i(new Error("时间跨度不能超过1年")):void i():i(new Error("请选择日期"))},trigger:"change",required:!0}]},workAddrList:[],workTimeList:[]}},methods:{init:function(){this.team_id=a.a("projectStorageInfo").team_id,this.project_id=a.a("projectStorageInfo").project_id,this.task_id=a.a("kqpb_task_id"),this.pickerchoose_date=a.h(new Date),this.choose_date=a.h(new Date),this.getKqList(),this.getTableHeight(),this.getTaskList(),this.getAddrList()},getKqList:function(){var e=this;this.ygpbListLoading=!0,a.b({url:"/attendance/attendance_task_autonomy_list_pc",data:{project_id:this.project_id,team_id:this.team_id,task_id:this.task_id,choose_date:this.choose_date,page_size:20,page:this.page_no},type:"POST",success:function(t){e.ygpbListLoading=!1,0==t.errno?(e.ygpbList=t.data.list,e.total=+t.data.page_data.total):e.$message({showClose:!0,message:t.errmsg,type:"warning"})},error:function(t,i){e.ygpbListLoading=!1},noNetwork:function(){e.ygpbListLoading=!1,e.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}})},handleSizeChange:function(){this.getKqList()},getTableHeight:function(){this.tableHeight=window.innerHeight-282},resetForm:function(e,t){this.$refs[e].resetFields(),this[t]=!1},createPbFn:function(){this.createshoworhide=!0},release:function(e){var t=0==e.last_publish_date?Date.now():1e3*e.last_publish_date;this.pbbegintime.disabledDate=function(e){return e.getTime()<=t},this.releaseshoworhide=!0,this.editygpb.addr=e.position_id+"",this.editygpb.time=e.schedule_id+"",this.editygpb.number=e.people_num,this.autonomy_task_id=e.autonomy_task_id},editygpbfn:function(e){this.editygpb.addr=e.position_id+"",this.editygpb.time=e.schedule_id+"",this.editygpb.number=e.people_num,this.editshoworhide=!0,this.autonomy_task_id=e.autonomy_task_id},addcreatefirm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(!t.switchcheck)return;t.switchcheck=!1,a.b({url:"/attendance/attendance_task_autonomy_add",data:{project_id:t.project_id,team_id:t.team_id,task_id:t.task_id,schedule_id:t.createygpb.time,position_id:t.createygpb.addr,people_num:t.createygpb.number,choose_date:t.choose_date},type:"POST",success:function(e){t.switchcheck=!0,0==e.errno?(t.$message({showClose:!0,message:"新建成功",type:"success"}),t.createshoworhide=!1,t.page_no=1,t.getKqList()):t.$message({showClose:!0,message:e.errmsg,type:"warning"})},error:function(e,i){t.switchcheck=!0},noNetwork:function(){t.switchcheck=!0,t.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}})}})},addeditfirm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(!t.switchcheck)return;t.switchcheck=!1,a.b({url:"/attendance/attendance_task_autonomy_update",data:{project_id:t.project_id,team_id:t.team_id,autonomy_task_id:t.autonomy_task_id,task_id:t.task_id,schedule_id:t.editygpb.time,position_id:t.editygpb.addr,people_num:t.editygpb.number,choose_date:t.choose_date},type:"POST",success:function(e){t.switchcheck=!0,0==e.errno?(t.editshoworhide=!1,t.$message({showClose:!0,message:"修改成功",type:"success"}),t.page_no=1,t.getKqList()):t.$message({showClose:!0,message:e.errmsg,type:"warning"})},error:function(e,i){t.switchcheck=!0},noNetwork:function(){t.switchcheck=!0,t.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}})}})},addreleasefirm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){if(!t.switchcheck)return;t.switchcheck=!1;var i=a.h(t.releaseygpb.kqDateDay[0]),o=a.h(t.releaseygpb.kqDateDay[1]);a.b({url:"/attendance/attendance_task_autonomy_publish",data:{project_id:t.project_id,team_id:t.team_id,task_id:t.task_id,autonomy_task_id:t.autonomy_task_id,start_date:i,end_date:o},type:"POST",success:function(e){t.releaseshoworhide=!1,t.switchcheck=!0,0==e.errno?(t.$message({showClose:!0,message:"发布成功",type:"success"}),t.page_no=1,t.getKqList()):t.$message({showClose:!0,message:e.errmsg,type:"warning"})},error:function(e,i){t.switchcheck=!0},noNetwork:function(){t.switchcheck=!0,t.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}})}})},getTaskList:function(){var e=this;a.b({url:"/attendance/task_schedule",data:{project_id:this.project_id,team_id:this.team_id,task_id:this.task_id},type:"POST",success:function(t){0==t.errno?e.workTimeList=t.data:e.$message({showClose:!0,message:t.errmsg,type:"warning"})},error:function(e,t){},noNetwork:function(){e.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}})},getAddrList:function(){var e=this;a.b({url:"/attendance/attendance_task_position_list",data:{project_id:this.project_id,team_id:this.team_id,task_id:this.task_id},type:"GET",success:function(t){0==t.errno?e.workAddrList=t.data:e.$message({showClose:!0,message:t.errmsg,type:"warning"})},error:function(e,t){},noNetwork:function(){e.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}})},pickerChange:function(){this.page_no=1,this.choose_date=a.h(this.pickerchoose_date),this.getKqList()},getpeoplelist:function(e,t,i){if("操作"==i.label)return!1;var o={autonomy_task_id:e.autonomy_task_id,choose_date:this.choose_date,send_status:e.send_status};a.c("ygpbmemberdata",o,86400),this.$router.replace("kqpbmemberlist")}},created:function(){this.init()}}}});