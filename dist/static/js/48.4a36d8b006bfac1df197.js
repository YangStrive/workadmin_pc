webpackJsonp([48],{1174:function(t,e,i){(t.exports=i(54)(!1)).push([t.i,'.insuranceM{padding:0 20px;padding-bottom:16px}.insuranceM .kqtask_top{height:50px;border-bottom:1px solid #e0e6ed}.insurance_tab li{font-size:14px;font-weight:600;line-height:1;text-align:center;color:#99a9bf;display:inline-block;height:42px;line-height:42px;cursor:pointer}.insurance_lifirst{margin-right:16px}.insurance_tab{position:relative;display:inline-block;margin-top:16px}.insurance_tab .tab_btnline{position:absolute;bottom:0;left:0;display:inline-block;height:3px;background-color:#69e;transition:left .2s}.insurance_tab .active{color:#69e}.insuranceM .el-form{margin-top:28px}.insuranceoparation：after{display:block;content:"";clear:both}.insuranceoparation .from-item-list1{float:left}.insuranceM .page,.insuranceoparation .from-item-list2{float:right}.insuranceMsearch .seach-empty{color:#c0ccda;font-size:14px;text-align:center;height:36px;line-height:36px}.insuranceMsearch{z-index:99999!important}.insuranceMsearch li{height:36px;line-height:36px;position:relative}.insuranceMsearch li .name{text-overflow:ellipsis;overflow:hidden}.insuranceM .el-dialog--tiny,.insuranceM .maskconfirm .el-dialog--tiny{width:400px}.insuranceM .maskconfirm .el-dialog__header{padding:24px 20px 0}.insuranceM .maskconfirm .el-dialog__body{padding:30px 40px;border-bottom:1px solid #e0e6ed}.insuranceM .maskconfirm .el-form-item__content{width:246px}.insuranceM .maskconfirm .el-form-item{margin-bottom:0}.insuranceM .el-dialog__footer{padding:16px 20px}.insuranceM .maskconfirm .el-dialog__body span{font-size:14px;color:#5e6d82;line-height:20px}.insuranceM .el-dialog__body{border-bottom:1px solid #e0e6ed}.insuranceM .user-name{position:relative;padding-left:37px}.insuranceM .user-img{width:30px;height:30px;border-radius:30px;margin-right:8px;display:block;position:absolute;left:0;top:-7px}.insuranceM .el-table .cell{line-height:40px}',""])},1317:function(t,e,i){var a=i(1174);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(55)("01df7238",a,!0)},144:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI5cHgiIHZpZXdCb3g9IjAgMCA1IDkiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NS4yICg0MzUxNCkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPuWQkeW3pueureWktCBjb3B5IDY8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPjwvZGVmcz4NCiAgICA8ZyBpZD0iMS4xX+S6uuWRmOeuoeeQhiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI4MS4wMDAwMDAsIC0xNjYuMDAwMDAwKSIgZmlsbD0iI0MwQ0NEQSI+DQogICAgICAgICAgICA8cGF0aCBkPSJNMjgxLjA1NDc4OSwxNzAuNzA5MDA1IEMyODAuOTU2NzY4LDE3MC40OTQ5MTIgMjgwLjk4ODg2MiwxNzAuMjMyOTY5IDI4MS4xNjI0NDEsMTcwLjA2MDgwNyBMMjg1LjA5NzY5NCwxNjYuMTUzMzc3IEMyODUuMzEyMjg5LDE2NS45NDA0MjUgMjg1LjY1MDU3MSwxNjUuOTUwNTQ3IDI4NS44NTM3ODUsMTY2LjE3NTQ4MyBDMjg2LjA1NjYyMSwxNjYuNDAwNzU1IDI4Ni4wNDczMjMsMTY2Ljc1NTg4NyAyODUuODMyNzI4LDE2Ni45NjkyMjQgTDI4Mi4zMDE3ODgsMTcwLjQ3NTgzMiBMMjg1LjgxODc5NywxNzQuMDM0NDgxIEMyODYuMDMxMjY0LDE3NC4yNDk3MDIgMjg2LjAzNzY5MiwxNzQuNjA0ODM1IDI4NS44MzI3MjgsMTc0LjgyODIyMSBDMjg1LjcyNzkxMywxNzQuOTQyNzcyIDI4NS41ODc4NDYsMTc1IDI4NS40NDc3MjMsMTc1IEMyODUuMzE0MDczLDE3NSAyODUuMTgwMzc3LDE3NC45NDc2MzYgMjg1LjA3NjY0OSwxNzQuODQyODQ2IEwyODEuMTc3MDcsMTcwLjg5NzIxIEMyODEuMTY5NTY3LDE3MC44ODkzOTMgMjgxLjE2NjczMSwxNzAuODc4NTI2IDI4MS4xNTkyMjcsMTcwLjg3MDMyNSBDMjgxLjE1MzUwOCwxNzAuODY0NjU3IDI4MS4xNDc0ODEsMTcwLjg2MDU2MyAyODEuMTQxNzczLDE3MC44NTQ1NTkgQzI4MS4xMTE0NjMsMTcwLjgyMTI2MiAyODEuMDk1NDE2LDE3MC43ODA0ODUgMjgxLjA3NDc0OCwxNzAuNzQyMjg5IEMyODEuMDY5MDUyLDE3MC43MzA2OSAyODEuMDU5Nzc2LDE3MC43MjA5ODggMjgxLjA1NDc4OSwxNzAuNzA5MDA1IFoiIGlkPSLlkJHlt6bnrq3lpLQtY29weS02IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyODMuNTAwMDAwLCAxNzAuNTAwMDAwKSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC0yODMuNTAwMDAwLCAtMTcwLjUwMDAwMCkgIj48L3BhdGg+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},1533:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"insuranceM"},[a("div",{staticClass:"kqtask_top"},[a("breadcrumb",[a("router-link",{attrs:{to:"insuranceMer",replace:""}},[t._v("用工保险")]),t._v(" "),a("router-link",{attrs:{to:""}},[t._v("保险人员管理")])],1)],1),t._v(" "),a("div",{staticClass:"insurance_tab"},[a("ul",[a("li",{staticClass:"insurance_lifirst",class:{active:t.tabactive},on:{click:function(e){return t.tabclick(1,e)}}},[t._v(t._s("在保("+t.normalNum+")"))]),t._v(" "),a("li",{class:{active:!t.tabactive},on:{click:function(e){return t.tabclick(2,e)}}},[t._v(t._s("已失效("+t.invalidNum+")"))])]),t._v(" "),a("i",{staticClass:"tab_btnline",style:{width:t.tabbtnwidth+"px",left:t.tabbtnleft+"px"}})]),t._v(" "),a("el-form",{staticClass:"insuranceoparation",attrs:{"label-width":"55px"}},[a("div",{staticClass:"from-item-list from-item-list1"},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.tabactive,expression:"tabactive"}],staticStyle:{"margin-bottom":"16px"},attrs:{label:"操作："}},[a("el-button",{staticClass:"move-btn disabled",attrs:{type:"primary",disabled:t.onmember},on:{click:t.ckedittime}},[t._v("修改投保日期")]),t._v(" "),a("el-button",{staticClass:"sign-btn default",attrs:{type:"primary",disabled:t.onmember},on:{click:t.cksetfail}},[t._v("置为失效")])],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.tabactive,expression:"!tabactive"}],staticStyle:{"margin-bottom":"16px"},attrs:{label:"操作："}},[a("el-button",{staticClass:"move-btn disabled",attrs:{type:"primary",disabled:t.offmember},on:{click:t.againset}},[t._v("重新投保")]),t._v(" "),a("el-button",{staticClass:"sign-btn default",attrs:{type:"primary",disabled:t.offmember},on:{click:t.delset}},[t._v("删除")])],1)],1),t._v(" "),a("div",{staticClass:"from-item-list from-item-list2"},[a("el-form-item",{attrs:{label:"人员："}},[a("el-autocomplete",{staticStyle:{width:"135px"},attrs:{"popper-class":"insuranceMsearch","fetch-suggestions":t.querySearch,"custom-item":"my-item-zh","trigger-on-focus":!1,placeholder:"姓名/手机号"},on:{select:t.handleSelect},model:{value:t.memberS,callback:function(e){t.memberS=e},expression:"memberS"}}),t._v(" "),a("el-button",{staticClass:"seach-btn",attrs:{type:"primary"},on:{click:t.seachMember}},[t._v("搜 索")])],1)],1)]),t._v(" "),a("div",[a("div",{staticClass:"from-member"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{height:t.tableHeight,"tooltip-effect":"dark","empty-text":"暂无数据",border:"",data:t.insuranceDataList},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",className:"noclick",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"头像/姓名","show-overflow-tooltip":"","label-class-name":"border",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"user-name"},[e.row.logo.thumb_url?a("img",{staticClass:"user-img",attrs:{src:e.row.logo.thumb_url,alt:""}}):a("img",{staticClass:"user-img",attrs:{src:i(750),alt:""}}),t._v("\n\t\t\t\t\t        "+t._s(e.row.name)+"\n\t\t\t\t\t      ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"手机号","label-class-name":"border","show-overflow-tooltip":"",prop:"mobile","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-icon",{attrs:{name:"mobile"}}),t._v(" "),a("el-popover",{attrs:{placement:"top",title:"",width:"150",trigger:"hover"}},[a("span",{staticStyle:{"margin-left":"35px"}},[t._v(t._s(e.row.mobile))]),t._v(" "),a("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.mobile.substr(0,3)+"****"+e.row.mobile.substr(7)))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"身份证号","label-class-name":"border","show-overflow-tooltip":"","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-icon",{attrs:{name:"id_number"}}),t._v(" "),a("el-popover",{attrs:{placement:"top",title:"",width:"150",trigger:"hover"}},[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.id_number))]),t._v(" "),a("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.id_number.substr(0,3)+"****"+e.row.id_number.substr(14)))])])]}}])}),t._v(" "),t.tabactive?a("el-table-column",{attrs:{label:"投保开始日期","show-overflow-tooltip":"","label-class-name":"border","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-icon",{attrs:{name:"entry_date"}}),t._v(" "),a("span",[t._v(t._s(e.row.start_time))])]}}],null,!1,3235108130)}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"投保失效日期","show-overflow-tooltip":"","label-class-name":"border","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-icon",{attrs:{name:"entry_date"}}),t._v(" "),a("span",[t._v(t._s(e.row.end_time))])]}}])})],1)],1),t._v(" "),0!=t.totallist?a("div",{staticClass:"page"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":20,layout:"total, prev, pager, next",total:t.totallist},on:{"current-change":t.handleCurrentPageChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)]):t._e()]),t._v(" "),a("div",{staticClass:"export-dialog edittime"},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.eidtloading,expression:"eidtloading"}],attrs:{title:"修改投保日期",visible:t.showedittime,size:"tiny"},on:{"update:visible":function(e){t.showedittime=e},close:function(e){return t.resetForm("edittimeform")}}},[a("el-form",{ref:"edittimeform",attrs:{model:t.edittimeform,"label-width":"97px",rules:t.rules}},[a("el-form-item",{attrs:{label:"保险时间",prop:"time"}},[a("el-date-picker",{staticStyle:{width:"248px"},attrs:{"range-separator":"至",type:"daterange",editable:!1,"picker-options":t.endtime,placeholder:"选择日期范围"},model:{value:t.edittimeform.time,callback:function(e){t.$set(t.edittimeform,"time",e)},expression:"edittimeform.time"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel",on:{click:function(e){return t.resetForm("edittimeform")}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(e){return t.editconfirm("edittimeform")}}},[t._v("确 定")])],1)],1)],1),t._v(" "),a("div",{staticClass:"export-dialog edittime"},[a("el-dialog",{attrs:{title:"重新投保",visible:t.showagaintime,size:"tiny"},on:{"update:visible":function(e){t.showagaintime=e},close:function(e){return t.resetForm("againtimeform")}}},[a("el-form",{ref:"againtimeform",attrs:{model:t.againtimeform,"label-width":"97px",rules:t.rules}},[a("el-form-item",{attrs:{label:"保险时间",prop:"time"}},[a("el-date-picker",{staticStyle:{width:"248px"},attrs:{type:"daterange","range-separator":"至",editable:!1,"picker-options":t.endtime,placeholder:"选择日期范围"},model:{value:t.againtimeform.time,callback:function(e){t.$set(t.againtimeform,"time",e)},expression:"againtimeform.time"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel",on:{click:function(e){return t.resetForm("againtimeform")}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(e){return t.againconfirm("againtimeform")}}},[t._v("确 定")])],1)],1)],1),t._v(" "),a("div",{staticClass:"export-dialog maskconfirm"},[a("el-dialog",{attrs:{title:"提示",top:"35%",visible:t.showsetdel,size:"tiny"},on:{"update:visible":function(e){t.showsetdel=e},close:function(e){t.showsetdel=!1}}},[a("span",[t._v("删除后的人将从失效列表中移除!")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel",on:{click:function(e){t.showsetdel=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:t.delconfirm}},[t._v("确 定")])],1)])],1),t._v(" "),a("div",{staticClass:"export-dialog maskconfirm"},[a("el-dialog",{attrs:{title:"提示",top:"35%",visible:t.showfail,size:"tiny"},on:{"update:visible":function(e){t.showfail=e},close:function(e){t.showfail=!1}}},[a("span",[t._v("确定后选中人员保险将失效，是否确定置为失效？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel",on:{click:function(e){t.showfail=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:t.failconfirm}},[t._v("确 定")])],1)])],1)],1)},staticRenderFns:[]}},175:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(6);i.n(a),i(5);e.default={name:"breadcrumb",data:function(){return{}},methods:{init:function(){}},mounted:function(){this.init()}}},176:function(t,e,i){(t.exports=i(54)(!1)).push([t.i,'.breadcrumb[data-v-615b8756]{float:left;padding-top:18px}.breadcrumb .wraper a[data-v-615b8756]{font-size:13px;color:#69e;font-weight:700}.breadcrumb .wraper a[data-v-615b8756]:last-child{color:#8492a6;cursor:default}.breadcrumb .wraper a[data-v-615b8756]:after{content:"";margin-left:8px;display:inline-block;width:10px;height:10px;background:url('+i(144)+") no-repeat}.breadcrumb .wraper a[data-v-615b8756]:last-child:after{display:none}",""])},177:function(t,e,i){var a=i(176);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(55)("45cb026d",a,!0)},178:function(t,e,i){var a=i(2)(i(175),i(179),function(t){i(177)},"data-v-615b8756",null);t.exports=a.exports},179:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"breadcrumb"},[e("div",{staticClass:"wraper"},[this._t("default")],2)])},staticRenderFns:[]}},750:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAA3tJREFUSA3FV1tPE0EUPjNbeqW0yKVAQAMYIsQ33/wVJpoY/4SJ8U19VN+MiX/CmGiif8IneVMwxMoDoUihLRR6gXZ3PN80u3S3eylq4klgd845830zO2fOORU0hCil5MbWz9tWV90Rgm4RiTlSak5PFaJEpEpK0bqMiY9rK0ufhRBWFKwIc9je3k42WuZDpcRjBp8O872wibIQ6lUmZbxZXFxsX+jdb4HEXzeLd8lSrxXRgnvKcCMG3iEpHt1cXf7gN0N6lfxZxbfNHy+Upd7/KSkwMRcYGosxvTwuBUg3NotvLUX3vY5/M5aC3q2tLj/gs+f19CRmv+C58b34PIrUMAxKJeOEp2lZ1Gi0OM4cvH445x2YjF1kxVNb6ewYZ4pPYxu8z1jMoLnZKcqOpolX7pi7pknlcpWqtbqjC3oRUtyzz1wj6OhtmltBZwqi60vzlEjEgzCp1T6jev2UDg6PAn2YbCeTNlYQ7Tq49JUJid7cWCaUFEypZIIK0xOUTiUCibExcMFBIjn07mmgvwYNtrotBh9JmIALnDojRSWH/jMNA4WN4yTCRU0jC0qkwQhPHb1RPrbdNCOzJYFT9nKvPc3/mRsb9Tf4aHO5aF9wcnBxwo+QkRHXdQ/1Hs5XzEmnyoTANZuBuX5g1lC+XNkGcvUAEit2dvfp7Ozcz+TS1Y7qVKkeu3S+A0FKchriehou3a5J9ZNGuBNbh8lePRCxxztWkcRwBmhYTm622tRqnfVwI/+rEicPWo/0Y4dOp8vpsObrigXt7R362vyUHNVfJNoVP6OfrnxQo1OuRl75tV/RudqrDxxL8UmiR+IrVQ508hg6nY5HQ3TuoxtwchSiDE5OIMJCj+ToA14kV/OxbEb/eV0mr+QpnU561b5jcGlOWMPKYjw+QlMTeUJGkjL89mHnNQ7CSrVOFjcJXukvi05F9zYCMe4wCoUJyjPhZYoEyEw0BxwP3jvd3wg4W0BnwBt6aa/y2tUZGs9nL02K+WiLZmcm9Z+NB2y7+4DO2TEGfC2cZg+feGG+cKlaDAxbjrkb2S0d6E/u1+y5iDFJk6Pps+gJxuPjY/qMsZAowX0+OW3SYeWI7JyNna7dWH7Gx+Uq1APENri3oUfUZkczurXBIgxD8m4UIZ22ud9qcCFBWsX5Qhg4tKEPJMbk//ITBsS28Cf85z/afgMMgaB6VKvrDwAAAABJRU5ErkJggg=="},77:function(t,e,i){var a=i(2)(i(947),i(1533),function(t){i(1317)},null,null);t.exports=a.exports},947:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(22),n=i.n(a),s=i(6),r=i.n(s),o=i(5),l=i(178),c=i.n(l);e.default={name:"kqtasklist",components:{breadcrumb:c.a},data:function(){return{team_id:0,project_id:0,invisible_man:[1],tabactive:!0,tabbtnwidth:0,tabbtnleft:0,eidtloading:!1,total_page:2,currentPage:1,memberS:"",onmember:!0,offmember:!0,showedittime:!1,edittimeform:{time:""},againtimeform:{time:""},endtime:{disabledDate:function(t){return t.getTime()<new Date((new Date).setHours(0,0,0,0))}},rules:{time:[{validator:function(t,e,i){return e&&e[0]?o.q(o.h(e[0]),o.h(e[1]))>30?i(new Error("时间跨度不能超过30天")):void i():i(new Error("请选择日期"))},trigger:"change",required:!0}]},showsetdel:!1,showagaintime:!1,showfail:!1,insuranceDataList:[],invalidNum:"",normalNum:"",page_no:1,loading:!0,totallist:0,tableHeight:0}},methods:{init:function(){this.team_id=o.a("projectStorageInfo").team_id,this.project_id=o.a("projectStorageInfo").project_id,this.tableHeight=window.innerHeight-316,this.tabbtnwidth=r()(".insurance_lifirst").width(),this.getInsuranceMemberList(),this.tabwidith=r()(".insurance_tab ul").width()},tabclick:function(t,e){console.log(this.tabwidith),r()(e.target).hasClass("active")||(this.loading=!0,this.tabbtnwidth=r()(e.target).width(),this.tabactive=!this.tabactive,this.tabbtnleft=1===t?0:this.tabwidith-this.tabbtnwidth+16,this.memberS="",this.page_no=1,this.getInsuranceMemberList())},getInsuranceMemberList:function(t){var e=this;this.onmember=!0,this.offmember=!0,this.currSelectMemberData=[],o.b({url:"/insurance/users/list/get",type:"GET",data:{team_id:this.team_id,project_id:this.project_id,page_no:this.page_no,page_size:20,search_user_id:t||""},timeout:1e4,success:function(i){e.loading=!1,0==i.errno?(t||(e.invalidNum=i.data[1].num.invalid_num,e.normalNum=i.data[1].num.normal_num),e.tabactive?(e.insuranceDataList=i.data[0].list.normal,e.totallist=t?+i.data[1].num.search_normal_num:+i.data[1].num.normal_num):(e.insuranceDataList=i.data[0].list.invalid,e.totallist=i.data.search_num,e.totallist=t?+i.data[1].num.search_invalid_num:+i.data[1].num.invalid_num)):e.alertinfo(i.errmsg)},error:function(t,i){e.alertinfo("网络连接失败，请检查网络")},noNetwork:function(){e.alertinfo("网络连接失败，请检查网络")}})},seachMember:function(){this.page_no=1,this.currentPage=1,this.memberS||(this.select_user_id=""),this.getInsuranceMemberList(this.select_user_id)},handleSelectionChange:function(t){this.currSelectMemberData=t,t.length?(this.onmember=!1,this.offmember=!1):(this.onmember=!0,this.offmember=!0)},handleCurrentPageChange:function(){this.page_no=this.currentPage,this.getInsuranceMemberList()},querySearch:function(t,e){var i=this;this.select_user_id="",t&&(this.states=[],o.b({url:"/group/member_search",type:"GET",data:{team_id:this.team_id,project_id:this.project_id,group_id:"",keyword:t,page_no:"",page_size:""},timeout:1e4,success:function(a){if(a&&0==a.errno){var n=[];a.data.list.forEach(function(t){var e;e={value:t.user_name,group_name:t.group_name,group_id:t.group_id,user_id:t.user_id},n.push(e)}),i.restaurants=n;var s=t?i.restaurants.filter(i.createFilter(t)):i.restaurants;0==s.length&&s.push({value:"无搜索结果",status:"-1"}),i.states=s,clearTimeout(i.timeout),i.timeout=setTimeout(function(){e(s)},1e3*Math.random())}},error:function(t,e){i.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})},noNetwork:function(){i.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}}))},handleSelect:function(t){-1==t.status?(this.memberS="",this.select_user_id=-1):this.select_user_id=t.user_id},ckedittime:function(){this.showedittime=!0},cksetfail:function(){this.showfail=!0},failconfirm:function(){var t=this,e=[];this.currSelectMemberData.map(function(t,i){e.push(t.user_id)}),o.b({url:"/insurance/users/del",type:"GET",data:{team_id:this.team_id,project_id:this.project_id,insured_ids:n()(e),status:-1},timeout:1e4,success:function(e){"0"==e.errno?(t.getInsuranceMemberList(),t.showfail=!1,t.alertinfo("置为失效成功","success")):t.alertinfo(e.errmsg)},error:function(e,i){t.alertinfo("网络连接失败，请检查网络")},noNetwork:function(){t.alertinfo("网络连接失败，请检查网络")}})},delconfirm:function(){var t=this,e=[];this.currSelectMemberData.map(function(t,i){e.push(t.user_id)}),o.b({url:"/insurance/users/del",type:"GET",data:{team_id:this.team_id,project_id:this.project_id,insured_ids:n()(e),status:-4},timeout:1e4,success:function(e){t.loading=!1,"0"==e.errno?(t.alertinfo("操作成功","success"),t.getInsuranceMemberList(),t.showsetdel=!1):t.alertinfo(e.errmsg)},error:function(e,i){t.alertinfo("网络连接失败，请检查网络")},noNetwork:function(){t.alertinfo("网络连接失败，请检查网络")}})},createFilter:function(t){return function(e){return e.value.toLowerCase()||e.value.indexOf(t)>-1}},editconfirm:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i,a=[];e.currSelectMemberData.map(function(t,e){a.push(t.user_id)}),i={status:2,start_date:(e.edittimeform.time[0].getTime()+"").substr(0,10),end_date:(e.edittimeform.time[1].getTime()+"").substr(0,10),week:["1","2","3","4","5","6","7"]},o.b({url:"/insurance/users/time/edit",type:"GET",data:{team_id:e.team_id,project_id:e.project_id,insured_ids:n()(a),time:n()(i)},timeout:1e4,success:function(t){e.loading=!1,"0"==t.errno&&(e.page_no=1,e.showedittime=!1,e.getInsuranceMemberList(),e.alertinfo("修改投保日期成功!","success"))},error:function(t,i){e.alertinfo("网络连接失败，请检查网络")},noNetwork:function(){e.alertinfo("网络连接失败，请检查网络")}})}})},resetForm:function(t){this.$refs[t].resetFields(),this.showedittime=!1,this.showagaintime=!1},againset:function(){this.showagaintime=!0},againconfirm:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i,a=[];e.currSelectMemberData.map(function(t,e){a.push(t.user_id)}),i={status:2,start_date:(e.againtimeform.time[0].getTime()+"").substr(0,10),end_date:(e.againtimeform.time[1].getTime()+"").substr(0,10),week:["1","2","3","4","5","6","7"]},o.b({url:"/insurance/users/time/edit",type:"GET",data:{team_id:e.team_id,project_id:e.project_id,insured_ids:n()(a),time:n()(i)},timeout:1e4,success:function(t){e.loading=!1,"0"==t.errno&&(e.page_no=1,e.getInsuranceMemberList(),e.alertinfo("重新投保成功","success"),e.showagaintime=!1)},error:function(t,i){e.alertinfo("网络连接失败，请检查网络")},noNetwork:function(){e.alertinfo("网络连接失败，请检查网络")}})}})},delset:function(){this.showsetdel=!0},alertinfo:function(t,e){this.$message({showClose:!0,message:t,type:e||"warning"})}},mounted:function(){this.init()},watch:{$route:function(t,e){this.init()}}}}});