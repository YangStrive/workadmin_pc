webpackJsonp([49],{1148:function(e,t,a){(e.exports=a(54)(!1)).push([e.i,"#Customerconfirm .customer-wapper .el-tabs__item{color:#8492a6}#Customerconfirm .customer-wapper .el-tabs__item.is-active{color:#69e}#Customerconfirm .customer-wapper .el-tabs__active-bar{background-color:#69e}#Customerconfirm .customer-wapper .el-table td{border-right:none}#Customerconfirm .customer-wapper .el-table .is-center{border-left:1px solid #e0e6ed;border-right:1px solid #e0e6ed}#Customerconfirm .customer-wapper .el-table th{height:36px}#Customerconfirm .customer-wapper .el-table--border th,.el-table td,.el-table th.is-leaf{border-right:1px solid #e0e6ed}#Customerconfirm .customer-wapper .el-table--enable-row-hover .el-table__body tr:hover>td{background-color:#f7f7f9}#Customerconfirm .customer-wapper .el-table__empty-text{font-size:16px;color:#c0ccda}#Customerconfirm .checkconfirm .el-dialog--tiny{width:400px}#Customerconfirm .checkconfirm .el-dialog__header{padding:24px 20px 0}#Customerconfirm .checkconfirm .el-dialog__body{padding:30px 40px}.alertjected .el-dialog__body{border-bottom:1px solid #e0e6ed}#Customerconfirm .checkconfirm .el-form-item__content{width:246px}#Customerconfirm .checkconfirm .el-form-item{margin-bottom:0}#Customerconfirm .checkconfirm .el-dialog__footer{padding:16px 20px}",""])},1149:function(e,t,a){(e.exports=a(54)(!1)).push([e.i,".customer-wapper[data-v-567ebcf3]{padding:16px 20px 0;overflow:hidden}.customer-wapper h1[data-v-567ebcf3]{font-size:16px;font-weight:700;text-align:left;color:#475568;margin-bottom:8px;line-height:1.4}.customer-wapper h1 .new-build-mail[data-v-567ebcf3]{cursor:pointer;float:right;color:#69e;font-size:13px;font-weight:400}.customer-wapper h1 .new-build-mail .addIcon[data-v-567ebcf3]{display:block;width:13px;height:13px;float:left;margin-right:6px;margin-top:2px;background-image:url("+a(168)+")}.page[data-v-567ebcf3]{float:right}.progress_bar[data-v-567ebcf3]{width:20px;height:6px;border-radius:100px;background:#e5e9f2;vertical-align:middle;float:left;margin-top:10px}.progress_bar .green[data-v-567ebcf3]{height:6px;border-radius:100px;background-color:#8dd256}.progress_bar .red[data-v-567ebcf3]{height:6px;border-radius:100px;background-color:#f56c54}.progress_bar .yellow[data-v-567ebcf3]{height:6px;border-radius:100px;background-color:#fec622}.progress_text[data-v-567ebcf3]{font-size:12px;color:#475669;float:left;margin-left:5px}",""])},1291:function(e,t,a){var o=a(1148);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(55)("d42d301a",o,!0)},1292:function(e,t,a){var o=a(1149);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(55)("d0aac99a",o,!0)},1520:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.evaluationLoading,expression:"evaluationLoading"}],attrs:{id:"Customerconfirm"}},[a("div",{staticClass:"customer-wapper"},[a("h1",[e._v("客户确认"),0==e.admins.category?a("div",{staticClass:"new-build-mail",on:{click:e.NewCreatMailClick}},[a("i",{staticClass:"addIcon"}),e._v("新建确认邮件")]):e._e()]),e._v(" "),a("div",{staticClass:"mytabs"},[a("el-tabs",{on:{"tab-click":e.tabsClick},model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"待确认"+e.notConfirm,name:"0"}},[a("div",{staticClass:"notConfirmTableList",attrs:{id:"notConfirmId"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",height:e.winHeight,data:e.notConfirmTableData,"empty-text":"暂无待确认邮件",border:""}},[a("el-table-column",{attrs:{label:"邮件主题",prop:"subject",width:"200","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"确认人",prop:"confirm_user_name","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"发送人",prop:"send_user_name","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"工资月份",prop:"month_date",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"实发工资总额",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.total_real_wage/100))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteEmail(t.row.confirm_id,t.row.subject)}}},[e._v("删除")]),e._v(" "),2==t.row.action_no?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.emailDoing(t.row)}}},[e._v("重发邮件")]):e._e()]}}])})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"已确认"+e.confirm,name:"1"}},[a("div",{staticClass:"confirmTableList",attrs:{id:"confirmId"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",height:e.winHeight,data:e.confirmTableData,"empty-text":"暂无已确认邮件",border:""}},[a("el-table-column",{attrs:{label:"邮件主题",prop:"subject",width:"200","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"确认人",prop:"confirm_user_name","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"发送人",prop:"send_user_name","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"工资月份",prop:"month_date",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"实发工资总额",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.total_real_wage/100))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteEmail(t.row.confirm_id,t.row.subject)}}},[e._v("删除")]),e._v(" "),2==t.row.action_no?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.emailDoing(t.row)}}},[e._v("重发邮件")]):e._e()]}}])})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"拒绝确认"+e.refuseConfirm,name:"2"}},[a("div",{staticClass:"refuseConfirmTableList",attrs:{id:"refuseConfirmId"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",height:e.winHeight,data:e.refuseConfirmTableData,"empty-text":"暂无拒绝确认邮件",border:""}},[a("el-table-column",{attrs:{label:"邮件主题",prop:"subject",width:"200","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"确认人",prop:"confirm_user_name","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"发送人",prop:"send_user_name","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"工资月份",prop:"month_date",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"实发工资总额",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.total_real_wage/100))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteEmail(t.row.confirm_id,t.row.subject)}}},[e._v("删除")]),e._v(" "),2==t.row.action_no?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.emailDoing(t.row)}}},[e._v("重发邮件")]):e._e()]}}])})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"审核通过"+e.throughConfirm,name:"3"}},[a("div",{staticClass:"approvedList",attrs:{id:"approved"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",height:e.winHeight,data:e.throughConfirmTableData,"empty-text":"暂无审核通过邮件",border:""}},[a("el-table-column",{attrs:{label:"邮件主题",prop:"subject",width:"200","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"确认人",prop:"confirm_user_name","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"发送人",prop:"send_user_name","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"工资月份",prop:"month_date",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"实发工资总额",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.total_real_wage/100))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteEmail(t.row.confirm_id,t.row.subject)}}},[e._v("删除")]),e._v(" "),2==t.row.action_no?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.emailDoing(t.row)}}},[e._v("重发邮件")]):e._e()]}}])})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"已支付"+e.alreadyPay,name:"5"}},[a("div",{staticClass:"approvedList",attrs:{id:"approved"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",height:e.winHeight,data:e.alreadyPayTableData,"empty-text":"暂无已支付邮件",border:""}},[a("el-table-column",{attrs:{label:"邮件主题",prop:"subject",width:"200","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"确认人",prop:"confirm_user_name","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"发送人",prop:"send_user_name","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"工资月份",prop:"month_date",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"实发工资总额",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.total_real_wage/100))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteEmail(t.row.confirm_id,t.row.subject)}}},[e._v("删除")]),e._v(" "),2==t.row.action_no?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.emailDoing(t.row)}}},[e._v("重发邮件")]):e._e()]}}])})],1)],1)])],1),e._v(" "),0!=e.total_num?a("div",{staticClass:"page"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":20,layout:"total, prev, pager, next",total:parseInt(e.total_num)},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)]):e._e()],1)]),e._v(" "),a("div",{staticClass:"export-dialog checkconfirm"},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.evaluationLoading,expression:"evaluationLoading"}],attrs:{title:"提示",top:"35%",visible:e.showsetdel,size:"tiny"},on:{"update:visible":function(t){e.showsetdel=t},close:function(t){e.btnDisable=e.showsetdel=!1}}},[a("span",[e._v("是否重新发送确认邮件给"+e._s(e.confirm_user_email))]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel",on:{click:function(t){e.btnDisable=e.showsetdel=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:e.confirSendEmail}},[e._v("确 定")])],1)])],1)])},staticRenderFns:[]}},168:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE0cHgiIGhlaWdodD0iMTRweCIgdmlld0JveD0iMCAwIDE0IDE0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDUuMSAoNDM1MDQpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT7mt7vliqBfaG92ZXIxPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IjEuMV/kurrlkZjnrqHnkIYiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00OTYuMDAwMDAwLCAtMzU0LjAwMDAwMCkiIGZpbGw9IiM2Njk5RUUiPg0KICAgICAgICAgICAgPHBvbHlnb24gaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5IiBwb2ludHM9IjUwNCAzNjAgNTA0IDM1NSA1MDIgMzU1IDUwMiAzNjAgNDk3IDM2MCA0OTcgMzYyIDUwMiAzNjIgNTAyIDM2NyA1MDQgMzY3IDUwNCAzNjIgNTA5IDM2MiA1MDkgMzYwIj48L3BvbHlnb24+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},192:function(e,t,a){e.exports={default:a(200),__esModule:!0}},200:function(e,t,a){a(201);var o=a(8).Object;e.exports=function(e,t,a){return o.defineProperty(e,t,a)}},201:function(e,t,a){var o=a(19);o(o.S+o.F*!a(3),"Object",{defineProperty:a(16).f})},206:function(e,t,a){"use strict";t.__esModule=!0;var o=function(e){return e&&e.__esModule?e:{default:e}}(a(192));t.default=function(e,t,a){return t in e?(0,o.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},74:function(e,t,a){var o=a(2)(a(944),a(1520),function(e){a(1291),a(1292)},"data-v-567ebcf3",null);e.exports=o.exports},944:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(206),i=a.n(o),r=a(6),n=a.n(r),l=a(5);t.default={name:"Customerconfirm",data:function(){var e;return e={showsetdel:!1,evaluationLoading:!1,btnDisable:!1,sendBeginTime:0,admins:{category:!1},team_id:"",project_id:"",winHeight:"",activeTabName:"0",currTabActive:"",notConfirm:"",confirm:"",refuseConfirm:"",throughConfirm:"",alreadyPay:"",notConfirmTableData:[],confirmTableData:[],refuseConfirmTableData:[],throughConfirmTableData:[],alreadyPayTableData:[],page_no:1,currentPage:1,total_num:""},i()(e,"winHeight",""),i()(e,"confirm_user_email",""),i()(e,"confirm_id",""),e},methods:{init:function(){this.winHeight=window.innerHeight-220,this.team_id=l.a("projectStorageInfo").team_id,this.project_id=l.a("projectStorageInfo").project_id,this.currTabActive=l.a("activeTabName"),this.currTabActive?(this.activeTabName=this.currTabActive,this.getData()):this.activeTabName="0",this.getData(),this.getPermissions()},confirSendEmail:function(){var e=this;this.showsetdel=!1,this.evaluationLoading=!0,l.b({url:"/ss/confirm/mail/resend",type:"POST",data:{confirm_id:this.confirm_id,team_id:this.team_id,project_id:this.project_id},success:function(t){e.evaluationLoading=!1,e.showsetdel=!1,t&&0==t.errno?(e.sendBeginTime=+new Date,e.$message({showClose:!0,message:"重新发送成功",type:"success"})):e.$message({showClose:!0,message:t.errmsg,type:"warning"})},error:function(t,a){e.showsetdel=!1,e.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"}),e.evaluationLoading=!1},noNetwork:function(){e.showsetdel=!1,e.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"}),e.evaluationLoading=!1}})},emailDoing:function(e){this.confirm_user_email=e.confirm_user_email,this.confirm_id=e.confirm_id,+new Date-this.sendBeginTime<18e4?this.$message({showClose:!0,message:"操作过于频繁，请于3分钟后再次尝试重新发送",type:"warning"}):this.showsetdel=!0},getData:function(){var e=this;this.evaluationLoading=!0,setTimeout(function(){n()(".el-table__body-wrapper").scrollTop(0)});var t;t={team_id:this.team_id,project_id:this.project_id,status:this.activeTabName,page:this.page_no,page_size:20},l.b({url:"/ss/confirm/list",type:"POST",data:t,timeout:1e4,success:function(t){e.evaluationLoading=!1,l.c("activeTabName",""),t&&0==t.errno?(e.total_num=t.data.total_num||0,e.notConfirm="("+t.data.not_confirmed+")",e.confirm="("+t.data.confirmed+")",e.refuseConfirm="("+t.data.pending+")",e.throughConfirm="("+t.data.check_pass+")",e.alreadyPay="("+(t.data.already_pay||0)+")",0==e.activeTabName?e.notConfirmTableData=t.data.list:1==e.activeTabName?e.confirmTableData=t.data.list:2==e.activeTabName?e.refuseConfirmTableData=t.data.list:3==e.activeTabName?e.throughConfirmTableData=t.data.list:5==e.activeTabName&&(e.alreadyPayTableData=t.data.list)):e.$message({showClose:!0,message:t.errmsg,type:"warning"})},error:function(t,a){e.evaluationLoading=!1,l.c("activeTabName","")},noNetwork:function(){e.evaluationLoading=!1,l.c("activeTabName",""),e.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}})},deleteEmail:function(e,t){var a=this;return this.$confirm("确认删除“邮件主题"+t+"”？","确认删除邮件",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var t={team_id:a.team_id,project_id:a.project_id,confirm_id:e};l.b({url:"/ss/confirm/delete",type:"POST",data:t,timeout:1e4,success:function(e){e&&0==e.errno?(a.getData(),a.$message({type:"success",message:"删除成功!"})):a.$message({showClose:!0,message:e.errmsg,type:"warning"})},error:function(e,t){l.c("activeTabName","")},noNetwork:function(){l.c("activeTabName",""),a.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}})}).catch(function(){}),!1},NewCreatMailClick:function(){this.$router.replace("fullTimeCreatMail")},tabsClick:function(e,t){this.activeTabName=e.name,this.page_no=1,this.currentPage=1,this.getData()},handleCurrentPageChange:function(e){this.page_no=e,this.getData()},handleSizeChange:function(e){},getLocalTime:function(e){return l.e(e,"yyyy-MM-dd")},getPermissions:function(){var e=this;l.b({url:"/permission/application",type:"GET",data:{team_id:this.team_id,project_id:this.project_id,application_id:0},timeout:1e4,success:function(t){t&&0==t.errno?t.data.forEach(function(t){"invisible_man"==t.id_name?e.admins.category=!0:e.admins.category=!1}):e.$message({showClose:!0,message:t.errmsg,type:"warning"})},error:function(e,t){},noNetwork:function(){e.$message({showClose:!0,message:"网络连接失败，请检查网络",type:"warning"})}})},GetQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=("?"+window.location.href.split("?")[1]).substr(1).match(t);return null!=a?unescape(a[2]):null}},mounted:function(){var e=this;this.init(),n()(window).on("resize",function(){e.winHeight=window.innerHeight-220})},watch:{$route:function(e,t){this.init()}}}}});